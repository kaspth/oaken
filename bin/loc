#!/usr/bin/env ruby

# To setup dependencies run with: bin/loc --install
if ARGV.delete("--install")
  system "brew install cloc"
  system "gem install activerecord factory_bot test_data --no-doc"
end

def cloc(paths)
  # Run `cloc --help` to see all possible options. Try: bin/loc --by-file
  system("cloc", *ARGV, "--quiet", *Array(paths))
end

puts "FIXTURES"
Dir.chdir File.dirname(`gem which active_record`) do
  cloc %w[test_fixtures.rb fixtures.rb fixture_set encryption/encrypted_fixtures.rb].map { "./active_record/#{_1}" }
end

puts "FACTORY BOT"
Dir.chdir(File.dirname(`gem which factory_bot`)) { cloc "." }

puts "TEST DATA"
Dir.chdir(File.dirname(`gem which test_data`)) { cloc "." }

puts "OAKEN"
Dir.chdir("lib") { cloc "." }
